(()=>{"use strict";const e=({slidesClass:e,prevId:t,nextId:o,slidesWrapperClass:s,slidesFieldClass:r,totalClass:l,currentClass:n,changeDisplayClass:i=!1,hideArrows:a=!1,slidesPerView:c=1})=>{const d=document.querySelector(s),p=d.querySelector(r),u=p.querySelectorAll(e),m=document.getElementById(t),y=document.getElementById(o),h=getComputedStyle(d).width,f=document.querySelector(n),_=document.querySelector(l),g=document.querySelectorAll(i),v=()=>"none"!==getComputedStyle(p).display,C=Math.ceil(parseFloat(h)/c),w=()=>{const e=f?+f.textContent-1:0,t=0===e?u.length-1:e-1;g[t].style.display="none",g[e].style.display="block"};let b=0;_&&(_.textContent=1===c?u.length:u.length-(c-1)),g.length&&w(),p.style.width=100*u.length/c+"%",p.style.display="flex",p.style.minWidth="max-content",p.style.transition="0.5s all",d.style.overflow="hidden",u.forEach((e=>{e.style.width=C+"px"})),y.addEventListener("click",(()=>{v()&&(f&&(+f.textContent===u.length?f.textContent=1:f.textContent=+f.textContent+1),g&&w(),a?(m.style.display="flex",b/C+1>=u.length-c&&(y.style.display="none"),b+=C):b>=C*(u.length-1)?b=0:b+=C,p.style.transform=`translateX(-${b}px)`)})),m.addEventListener("click",(()=>{v()&&(f&&(1==+f.textContent?f.textContent=u.length:f.textContent=+f.textContent-1),g&&w(),a?(y.style.display="flex",b<=C&&(m.style.display="none"),b-=C):b<=0?b=C*(u.length-1):b-=C,p.style.transform=`translateX(-${b}px)`)}))},t=()=>{document.body.style.marginRight=`${(()=>{let e=0;if(Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)>document.documentElement.clientHeight){let t=document.createElement("div");t.style.width="500px",t.style.height="500px",t.style.overflowY="scroll",t.style.visibility="hidden",document.body.appendChild(t),e=t.offsetWidth-t.clientWidth,t.remove()}return e})()}px`,document.body.style.overflow="hidden"},o=()=>{document.body.style.marginRight="0",document.body.style.overflow="auto"},s=(e,t)=>{t.preventDefault();const o=e.getAttribute("href").substring(1),s=document.getElementById(o).getBoundingClientRect().top;window.scrollBy({top:s,behavior:"smooth"})},r=(e,s="")=>{e.classList.toggle("popup--active"),e.classList.contains("popup--active")?t():o(),e.matches(".popup-repair-types.popup--active")&&s.preventDefault()};(()=>{const e=document.querySelector(".header-contacts__arrow"),l=e.querySelector("img"),n=document.querySelector(".header-contacts__phone-number-accord"),i=n.querySelector(".header-contacts__phone-number"),a=document.querySelector(".menu__icon"),c=document.querySelector(".popup-menu"),d=c.querySelector(".popup-dialog-menu"),p=document.querySelectorAll(".show-all-services"),u=document.querySelector(".popup-repair-types"),m=document.querySelector(".popup-privacy");e.addEventListener("click",(()=>{n.classList.toggle("header-contacts__phone-number-accord--open"),i.classList.toggle("header-contacts__phone-number--show"),l.classList.toggle("header-contacts__arrow-img--open")}));const y=()=>{c.classList.remove("popup-menu--active"),d.classList.remove("popup-dialog-menu--active"),o()};a.addEventListener("click",(()=>{c.classList.add("popup-menu--active"),d.classList.add("popup-dialog-menu--active"),t()})),document.addEventListener("click",(e=>{const t=e.target;if(t.closest(".close-menu")||t.classList.contains("popup-menu--active"))y();else if(t.closest(".popup-menu-nav__item"))s(t,e),y();else if(t.closest(".button-footer")){const o=t.closest(".button-footer").querySelector("a");s(o,e)}else if(t.classList.contains("link-privacy"))r(m);else if(t.closest(".close")||t.classList.contains("popup--active")){const e=t.closest(".popup--active");r(e)}})),p.forEach((e=>e.addEventListener("click",(e=>{r(u,e)}))))})(),document.querySelectorAll("form").forEach((e=>e.addEventListener("submit",(function(e){const t=this.querySelectorAll("input[type=text]"),o=this.querySelector("input[type=checkbox]");let s=!0;if(t.forEach((e=>{switch(e.name){case"phone":e.value<18&&(alert("Пожалуйста, введите номер телефона."),s=!1);break;case"name":""===e.value.trim()&&(alert("Пожалуйста, напишите ваше имя."),s=!1)}})),o.checked||(alert("Пожалуйста, дайте согласие на обработку персональных данных."),s=!1),s){const e=new FormData(this);let t={};e.forEach(((e,o)=>{t[o]=e})),r=t,fetch("../server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((e=>e.json())).catch((()=>console.error(new Error("Ошибка отправки данных из формы")))),this.reset()}var r;e.preventDefault()})))),function(e,t="+7 (___) ___-__-__"){const o=document.querySelectorAll(e);function s(e){const o=e.keyCode,s=t,r=s.replace(/\D/g,""),l=this.value.replace(/\D/g,"");let n=0,i=s.replace(/[_\d]/g,(function(e){return n<l.length?l.charAt(n++)||r.charAt(n):e}));n=i.indexOf("_"),-1!=n&&(i=i.slice(0,n));let a=s.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");a=new RegExp("^"+a+"$"),(!a.test(this.value)||this.value.length<5||o>47&&o<58)&&(this.value=i),"blur"==e.type&&this.value.length<5&&(this.value="")}for(const e of o)e.addEventListener("input",s),e.addEventListener("focus",s),e.addEventListener("blur",s)}('input[data-mask="phone"'),(()=>{const t=document.querySelectorAll(".mobile-hide .formula-item__icon"),o=document.querySelector(":root");t.forEach((e=>{e.addEventListener("mouseenter",(function(e){const t=e.target.closest(".formula-item"),s=t.querySelector(".formula-item-popup"),r=t.getBoundingClientRect().top,l=parseInt(getComputedStyle(s).height)+15;r<l?(o.style.setProperty("--number-degrees","180deg"),s.style.paddingTop="40px",s.style.bottom=-(l+15)+"px"):(o.style.setProperty("--number-degrees",0),s.style.paddingTop="20px",s.style.bottom="90px"),t.classList.add("active-item")})),e.addEventListener("mouseleave",(function(e){e.target.closest(".formula-item").classList.remove("active-item")}))}));const s=document.querySelectorAll(".desktop-hide .formula-item__icon");o.style.setProperty("--number-degrees","180deg"),s.forEach((e=>{e.addEventListener("click",(e=>{e.target.closest(".formula-item").classList.toggle("active-item")}))})),e({slidesClass:".formula-slider__slide",prevId:"formula-arrow_left",nextId:"formula-arrow_right",slidesWrapperClass:".formula-slider-wrap",slidesFieldClass:".formula-slider"})})(),(()=>{const t=document.querySelectorAll(".repair-types__tab-content");(({tabsContainerClass:e,tabClass:t,contentClass:o})=>{const s=document.querySelector(e),r=s.querySelectorAll(t),l=document.querySelectorAll(o),n=document.querySelector(".slider-counter-content__total"),i=document.querySelector(".slider-counter-content__current");s.addEventListener("click",(e=>{const o=e.target.closest(t);o&&r.forEach(((e,t)=>{o===e?(e.classList.add("active"),l[t].classList.remove("d-none"),(e=>{const t=l[e].querySelectorAll(".repair-types-slider__slide").length;n.textContent=t,i.textContent=1,l[e].style.transform="translateX(0)"})(t)):(e.classList.remove("active"),l[t].classList.add("d-none"))}))}))})({tabsContainerClass:".nav-list-repair",tabClass:".repair-types-nav__item",contentClass:".repair-types__tab-content"}),window.screen.width<1025&&e({slidesClass:".repair-types-nav__item",prevId:"nav-arrow-repair-left_base",nextId:"nav-arrow-repair-right_base",slidesWrapperClass:".repair-types-nav",slidesFieldClass:".nav-list-repair"}),t.forEach(((t,o)=>{e({slidesClass:`.types-repair${o+1} .repair-types-slider__slide`,prevId:"repair-types-arrow_left",nextId:"repair-types-arrow_right",slidesWrapperClass:".repair-types-slider",slidesFieldClass:`.types-repair${o+1}`,currentClass:".slider-counter-content__current",totalClass:".slider-counter-content__total"})}))})(),document.querySelector(".portfolio-slider-container").addEventListener("click",(e=>{if(e.target.classList.contains("portfolio-slider__slide-frame")){const e=document.querySelector(".popup-portfolio");r(e)}})),e({slidesWrapperClass:".popup-portfolio-slider-wrap",slidesFieldClass:".popup-portfolio-slider",slidesClass:".popup-portfolio-slider__slide",prevId:"popup_portfolio_left",nextId:"popup_portfolio_right",slidesPerView:1,currentClass:"#popup-portfolio-counter .slider-counter-content__current",totalClass:"#popup-portfolio-counter .slider-counter-content__total",changeDisplayClass:".popup-portfolio-text"}),window.screen.width>1025?e({slidesWrapperClass:".portfolio-slider-container",slidesFieldClass:".portfolio-slider.mobile-hide",slidesClass:".portfolio-slider__slide",prevId:"portfolio-arrow_left",nextId:"portfolio-arrow_right",slidesPerView:3,hideArrows:!0}):window.screen.width>=900?e({slidesWrapperClass:".portfolio-slider-container",slidesFieldClass:".portfolio-slider.mobile-hide",slidesClass:".portfolio-slider__slide",prevId:"portfolio-arrow_left",nextId:"portfolio-arrow_right",slidesPerView:2,totalClass:"#portfolio-counter .slider-counter-content__total",currentClass:"#portfolio-counter .slider-counter-content__current",hideArrows:!0}):window.screen.width>=576?e({slidesWrapperClass:".portfolio-slider-container",slidesFieldClass:".portfolio-slider.mobile-hide",slidesClass:".portfolio-slider__slide",prevId:"portfolio-arrow_left",nextId:"portfolio-arrow_right",slidesPerView:1,totalClass:"#portfolio-counter .slider-counter-content__total",currentClass:"#portfolio-counter .slider-counter-content__current",hideArrows:!0}):e({slidesWrapperClass:".portfolio-slider-container",slidesFieldClass:".portfolio-slider-mobile",slidesClass:".portfolio-slider__slide-frame",prevId:"portfolio-arrow-mobile_left",nextId:"portfolio-arrow-mobile_right",slidesPerView:1,totalClass:"#portfolio-counter .slider-counter-content__total",currentClass:"#portfolio-counter .slider-counter-content__current",hideArrows:!0}),window.addEventListener("resize",(()=>{}))})();