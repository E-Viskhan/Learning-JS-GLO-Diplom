(()=>{"use strict";const e=()=>{document.body.style.marginRight=`${(()=>{let e=0;if(Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)>document.documentElement.clientHeight){let t=document.createElement("div");t.style.width="500px",t.style.height="500px",t.style.overflowY="scroll",t.style.visibility="hidden",document.body.appendChild(t),e=t.offsetWidth-t.clientWidth,t.remove()}return e})()}px`,document.body.style.overflow="hidden"},t=()=>{document.body.style.marginRight="0",document.body.style.overflow="auto"},o=(e,t)=>{t.preventDefault();const o=e.getAttribute("href").substring(1),c=document.getElementById(o).getBoundingClientRect().top;window.scrollBy({top:c,behavior:"smooth"})};(()=>{const c=document.querySelector(".header-contacts__arrow"),n=c.querySelector("img"),s=document.querySelector(".header-contacts__phone-number-accord"),l=s.querySelector(".header-contacts__phone-number"),r=document.querySelector(".menu__icon"),i=document.querySelector(".popup-menu"),a=i.querySelector(".popup-dialog-menu"),u=document.querySelectorAll(".show-all-services"),p=document.querySelector(".popup-repair-types"),d=document.querySelector(".popup-privacy");c.addEventListener("click",(()=>{s.classList.toggle("header-contacts__phone-number-accord--open"),l.classList.toggle("header-contacts__phone-number--show"),n.classList.toggle("header-contacts__arrow-img--open")}));const h=()=>{i.classList.remove("popup-menu--active"),a.classList.remove("popup-dialog-menu--active"),t()},m=(o,c="")=>{o.classList.toggle("popup--active"),o.classList.contains("popup--active")?e():t(),o.matches(".popup-repair-types.popup--active")&&c.preventDefault()};r.addEventListener("click",(()=>{i.classList.add("popup-menu--active"),a.classList.add("popup-dialog-menu--active"),e()})),document.addEventListener("click",(e=>{const t=e.target;if(t.closest(".close-menu")||t.classList.contains("popup-menu--active"))h();else if(t.closest(".popup-menu-nav__item"))o(t,e),h();else if(t.closest(".button-footer")){const c=t.closest(".button-footer").querySelector("a");o(c,e)}else if(t.classList.contains("link-privacy"))m(d);else if(t.closest(".close")||t.classList.contains("popup--active")){const e=t.closest(".popup--active");m(e)}})),u.forEach((e=>e.addEventListener("click",(e=>{m(p,e)}))))})(),document.querySelectorAll("form").forEach((e=>e.addEventListener("submit",(function(e){const t=this.querySelectorAll("input[type=text]"),o=this.querySelector("input[type=checkbox]");let c=!0;if(t.forEach((e=>{switch(e.name){case"phone":e.value<18&&(alert("Пожалуйста, введите номер телефона."),c=!1);break;case"name":""===e.value.trim()&&(alert("Пожалуйста, напишите ваше имя."),c=!1)}})),o.checked||(alert("Пожалуйста, дайте согласие на обработку персональных данных."),c=!1),c){const e=new FormData(this);let t={};e.forEach(((e,o)=>{t[o]=e})),n=t,fetch("../server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>e.json())).catch((()=>console.error(new Error("Ошибка отправки данных из формы")))),this.reset()}var n;e.preventDefault()})))),function(e,t="+7 (___) ___-__-__"){const o=document.querySelectorAll(e);function c(e){const o=e.keyCode,c=t,n=c.replace(/\D/g,""),s=this.value.replace(/\D/g,"");let l=0,r=c.replace(/[_\d]/g,(function(e){return l<s.length?s.charAt(l++)||n.charAt(l):e}));l=r.indexOf("_"),-1!=l&&(r=r.slice(0,l));let i=c.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");i=new RegExp("^"+i+"$"),(!i.test(this.value)||this.value.length<5||o>47&&o<58)&&(this.value=r),"blur"==e.type&&this.value.length<5&&(this.value="")}for(const e of o)e.addEventListener("input",c),e.addEventListener("focus",c),e.addEventListener("blur",c)}('input[data-mask="phone"')})();