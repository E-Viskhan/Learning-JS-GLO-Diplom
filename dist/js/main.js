(()=>{"use strict";const e=()=>{document.body.style.marginRight=`${(()=>{let e=0;if(Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)>document.documentElement.clientHeight){let t=document.createElement("div");t.style.width="500px",t.style.height="500px",t.style.overflowY="scroll",t.style.visibility="hidden",document.body.appendChild(t),e=t.offsetWidth-t.clientWidth,t.remove()}return e})()}px`,document.body.style.overflow="hidden"},t=()=>{document.body.style.marginRight="0",document.body.style.overflow="auto"},o=(e,t)=>{t.preventDefault();const o=e.getAttribute("href").substring(1),n=document.getElementById(o).getBoundingClientRect().top;window.scrollBy({top:n,behavior:"smooth"})};(()=>{const n=document.querySelector(".header-contacts__arrow"),c=n.querySelector("img"),s=document.querySelector(".header-contacts__phone-number-accord"),r=s.querySelector(".header-contacts__phone-number"),l=document.querySelector(".menu__icon"),i=document.querySelector(".popup-menu"),a=i.querySelector(".popup-dialog-menu"),u=document.querySelectorAll(".show-all-services"),d=document.querySelector(".popup-repair-types");n.addEventListener("click",(()=>{s.classList.toggle("header-contacts__phone-number-accord--open"),r.classList.toggle("header-contacts__phone-number--show"),c.classList.toggle("header-contacts__arrow-img--open")}));const p=()=>{i.classList.remove("popup-menu--active"),a.classList.remove("popup-dialog-menu--active"),t()};l.addEventListener("click",(()=>{i.classList.add("popup-menu--active"),a.classList.add("popup-dialog-menu--active"),e()})),document.addEventListener("click",(e=>{const n=e.target;if(n.closest(".close-menu")||n.classList.contains("popup-menu--active"))p();else if(n.closest(".popup-menu-nav__item"))o(n,e),p();else if(n.closest(".button-footer")){const t=n.closest(".button-footer").querySelector("a");o(t,e)}else(n.closest(".repair-types--close")||n.classList.contains("popup-repair-types--active"))&&(t(),d.classList.remove("popup-repair-types--active"))})),u.forEach((t=>t.addEventListener("click",(t=>(t=>{t.preventDefault(),p(),e(),d.classList.add("popup-repair-types--active")})(t)))))})(),document.querySelectorAll("form").forEach((e=>e.addEventListener("submit",(function(e){const t=this.querySelectorAll("input[type=text]"),o=this.querySelector("input[type=checkbox]");let n=!0;if(t.forEach((e=>{switch(e.name){case"phone":e.value<18&&(alert("Пожалуйста, введите номер телефона."),n=!1);break;case"name":""===e.value.trim()&&(alert("Пожалуйста, напишите ваше имя."),n=!1)}})),o.checked||(alert("Пожалуйста, дайте согласие на обработку персональных данных."),n=!1),n){const e=new FormData(this);let t={};e.forEach(((e,o)=>{t[o]=e})),c=t,fetch("../server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((e=>e.json())).catch((()=>console.error(new Error("Ошибка отправки данных из формы")))),this.reset()}var c;e.preventDefault()})))),function(e,t="+7 (___) ___-__-__"){const o=document.querySelectorAll(e);function n(e){const o=e.keyCode,n=t,c=n.replace(/\D/g,""),s=this.value.replace(/\D/g,"");let r=0,l=n.replace(/[_\d]/g,(function(e){return r<s.length?s.charAt(r++)||c.charAt(r):e}));r=l.indexOf("_"),-1!=r&&(l=l.slice(0,r));let i=n.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");i=new RegExp("^"+i+"$"),(!i.test(this.value)||this.value.length<5||o>47&&o<58)&&(this.value=l),"blur"==e.type&&this.value.length<5&&(this.value="")}for(const e of o)e.addEventListener("input",n),e.addEventListener("focus",n),e.addEventListener("blur",n)}('input[data-mask="phone"')})();