(()=>{"use strict";const e=()=>{document.body.style.marginRight=`${(()=>{let e=0;if(Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)>document.documentElement.clientHeight){let t=document.createElement("div");t.style.width="500px",t.style.height="500px",t.style.overflowY="scroll",t.style.visibility="hidden",document.body.appendChild(t),e=t.offsetWidth-t.clientWidth,t.remove()}return e})()}px`,document.body.style.overflow="hidden"},t=()=>{document.body.style.marginRight="0",document.body.style.overflow="auto"},o=(e,t)=>{t.preventDefault();const o=e.getAttribute("href").substring(1),s=document.getElementById(o).getBoundingClientRect().top;window.scrollBy({top:s,behavior:"smooth"})};(()=>{const s=document.querySelector(".header-contacts__arrow"),l=s.querySelector("img"),n=document.querySelector(".header-contacts__phone-number-accord"),r=n.querySelector(".header-contacts__phone-number"),c=document.querySelector(".menu__icon"),i=document.querySelector(".popup-menu"),a=i.querySelector(".popup-dialog-menu"),d=document.querySelectorAll(".show-all-services"),u=document.querySelector(".popup-repair-types"),p=document.querySelector(".popup-privacy");s.addEventListener("click",(()=>{n.classList.toggle("header-contacts__phone-number-accord--open"),r.classList.toggle("header-contacts__phone-number--show"),l.classList.toggle("header-contacts__arrow-img--open")}));const m=()=>{i.classList.remove("popup-menu--active"),a.classList.remove("popup-dialog-menu--active"),t()},h=(o,s="")=>{o.classList.toggle("popup--active"),o.classList.contains("popup--active")?e():t(),o.matches(".popup-repair-types.popup--active")&&s.preventDefault()};c.addEventListener("click",(()=>{i.classList.add("popup-menu--active"),a.classList.add("popup-dialog-menu--active"),e()})),document.addEventListener("click",(e=>{const t=e.target;if(t.closest(".close-menu")||t.classList.contains("popup-menu--active"))m();else if(t.closest(".popup-menu-nav__item"))o(t,e),m();else if(t.closest(".button-footer")){const s=t.closest(".button-footer").querySelector("a");o(s,e)}else if(t.classList.contains("link-privacy"))h(p);else if(t.closest(".close")||t.classList.contains("popup--active")){const e=t.closest(".popup--active");h(e)}})),d.forEach((e=>e.addEventListener("click",(e=>{h(u,e)}))))})(),document.querySelectorAll("form").forEach((e=>e.addEventListener("submit",(function(e){const t=this.querySelectorAll("input[type=text]"),o=this.querySelector("input[type=checkbox]");let s=!0;if(t.forEach((e=>{switch(e.name){case"phone":e.value<18&&(alert("Пожалуйста, введите номер телефона."),s=!1);break;case"name":""===e.value.trim()&&(alert("Пожалуйста, напишите ваше имя."),s=!1)}})),o.checked||(alert("Пожалуйста, дайте согласие на обработку персональных данных."),s=!1),s){const e=new FormData(this);let t={};e.forEach(((e,o)=>{t[o]=e})),l=t,fetch("../server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then((e=>e.json())).catch((()=>console.error(new Error("Ошибка отправки данных из формы")))),this.reset()}var l;e.preventDefault()})))),function(e,t="+7 (___) ___-__-__"){const o=document.querySelectorAll(e);function s(e){const o=e.keyCode,s=t,l=s.replace(/\D/g,""),n=this.value.replace(/\D/g,"");let r=0,c=s.replace(/[_\d]/g,(function(e){return r<n.length?n.charAt(r++)||l.charAt(r):e}));r=c.indexOf("_"),-1!=r&&(c=c.slice(0,r));let i=s.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");i=new RegExp("^"+i+"$"),(!i.test(this.value)||this.value.length<5||o>47&&o<58)&&(this.value=c),"blur"==e.type&&this.value.length<5&&(this.value="")}for(const e of o)e.addEventListener("input",s),e.addEventListener("focus",s),e.addEventListener("blur",s)}('input[data-mask="phone"'),(()=>{const e=document.querySelectorAll(".mobile-hide .formula-item__icon"),t=document.querySelector(":root");if(e.forEach((e=>{e.addEventListener("mouseenter",(function(e){const o=e.target.closest(".formula-item"),s=o.querySelector(".formula-item-popup"),l=o.getBoundingClientRect().top,n=parseInt(getComputedStyle(s).height)+15;l<n?(t.style.setProperty("--number-degrees","180deg"),s.style.paddingTop="40px",s.style.bottom=-(n+15)+"px"):(t.style.setProperty("--number-degrees",0),s.style.paddingTop="20px",s.style.bottom="90px"),o.classList.add("active-item")})),e.addEventListener("mouseleave",(function(e){e.target.closest(".formula-item").classList.remove("active-item")}))})),window.screen.width<1026){const e=document.querySelectorAll(".desktop-hide .formula-item__icon");t.style.setProperty("--number-degrees","180deg"),e.forEach((e=>{e.addEventListener("click",(e=>{e.target.closest(".formula-item").classList.toggle("active-item")}))})),(({slidesClass:e,prevId:t,nextId:o,totalId:s,currentId:l,slidesWrapperClass:n,slidesFieldClass:r})=>{const c=document.querySelectorAll(e),i=document.getElementById(t),a=document.getElementById(o),d=document.querySelector(n),u=document.querySelector(r),p=getComputedStyle(d).width;s&&l&&(document.getElementById(s),document.getElementById(l));let m=0;u.style.width=100*c.length+"%",u.style.display="flex",u.style.transition="0.5s all",d.style.overflow="hidden",c.forEach((e=>{e.style.width=p})),a.addEventListener("click",(()=>{m===parseFloat(p)*(c.length-1)?m=0:m+=parseFloat(p),u.style.transform=`translateX(-${m}px)`})),i.addEventListener("click",(()=>{0==m?m=parseFloat(p)*(c.length-1):m-=parseFloat(p),u.style.transform=`translateX(-${m}px)`}))})({slidesClass:".formula-slider__slide",prevId:"formula-arrow_left",nextId:"formula-arrow_right",slidesWrapperClass:".formula-slider-wrap",slidesFieldClass:".formula-slider"})}})()})();