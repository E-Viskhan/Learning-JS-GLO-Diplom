(()=>{"use strict";const e=()=>{document.body.style.marginRight=`${(()=>{let e=0;if(Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)>document.documentElement.clientHeight){let t=document.createElement("div");t.style.width="500px",t.style.height="500px",t.style.overflowY="scroll",t.style.visibility="hidden",document.body.appendChild(t),e=t.offsetWidth-t.clientWidth,t.remove()}return e})()}px`,document.body.style.overflow="hidden"},t=()=>{document.body.style.marginRight="0",document.body.style.overflow="auto"},r=(e,t)=>{t.preventDefault();const r=e.getAttribute("href").substring(1),o=document.getElementById(r).getBoundingClientRect().top;window.scrollBy({top:o,behavior:"smooth"})},o=(r,o="")=>{r.classList.toggle("popup--active"),r.classList.contains("popup--active")?e():t(),r.matches(".popup-repair-types.popup--active")&&o.preventDefault()},s=({slidesClass:e,prevSelector:t,nextSelector:r,slidesWrapperClass:o,slidesFieldClass:s,totalClass:l,currentClass:n,changeDisplayClass:i=!1,hideArrows:a=!1,slidesPerView:c=1,initialSlide:p=!1})=>{const d=document.querySelector(o),u=d.querySelector(s),m=u.querySelectorAll(e),y=document.querySelector(t),h=document.querySelector(r),_=getComputedStyle(d).width,f=document.querySelector(n),v=document.querySelector(l),g=document.querySelectorAll(i),S=Math.ceil(parseFloat(_)/c),C=()=>"none"!==getComputedStyle(u).display,w=()=>{const e=f?+f.textContent-1:0,t=0===e?m.length-1:e-1;g[t].style.display="none",g[e].style.display="block"},b=()=>{q=+u.style.transform.match(/([0-9\.]+)/)[0]};let q=0;v&&(v.textContent=1===c?m.length:m.length-(c-1)),g.length&&w(),u.style.width=100*m.length/c+"%",u.style.display="flex",u.style.minWidth="max-content",u.style.transition="0.5s all",d.style.overflow="hidden",m.forEach((e=>{e.style.width=S+"px"})),h.addEventListener("click",(()=>{C()&&(p&&b(),f&&(+f.textContent===m.length?f.textContent=1:f.textContent=+f.textContent+1),g.length&&w(),a?(y.style.display="flex",q/S+1>=m.length-c&&(h.style.display="none"),q+=S):q>=S*(m.length-1)?q=0:q+=S,u.style.transform=`translateX(-${q}px)`)})),y.addEventListener("click",(()=>{C()&&(p&&b(),f&&(1==+f.textContent?f.textContent=m.length:f.textContent=+f.textContent-1),g.length&&w(),a?(h.style.display="flex",q<=S&&(y.style.display="none"),q-=S):q<=0?q=S*(m.length-1):q-=S,u.style.transform=`translateX(-${q}px)`)}))};(()=>{const s=document.querySelector(".header-contacts__arrow"),l=s.querySelector("img"),n=document.querySelector(".header-contacts__phone-number-accord"),i=n.querySelector(".header-contacts__phone-number"),a=document.querySelector(".menu__icon"),c=document.querySelector(".popup-menu"),p=c.querySelector(".popup-dialog-menu"),d=document.querySelector(".popup-privacy"),u=document.querySelector(".popup-consultation");s.addEventListener("click",(()=>{n.classList.toggle("header-contacts__phone-number-accord--open"),i.classList.toggle("header-contacts__phone-number--show"),l.classList.toggle("header-contacts__arrow-img--open")}));const m=()=>{c.classList.remove("popup-menu--active"),p.classList.remove("popup-dialog-menu--active"),t()};a.addEventListener("click",(()=>{c.classList.add("popup-menu--active"),p.classList.add("popup-dialog-menu--active"),e()})),document.addEventListener("click",(e=>{const t=e.target;if(t.closest(".close-menu")||t.classList.contains("popup-menu--active"))m();else if(t.closest(".popup-menu-nav__item"))r(t,e),m();else if(t.closest(".button-footer")){const o=t.closest(".button-footer").querySelector("a");r(o,e)}else if(t.classList.contains("link-privacy"))o(d);else if(t.classList.contains("button_consult"))o(u);else if(t.closest(".close")||t.classList.contains("popup--active")){const e=t.closest(".popup--active");o(e)}}))})(),document.querySelectorAll("form").forEach((e=>e.addEventListener("submit",(function(e){const t=this.querySelectorAll("input[type=text]"),r=this.querySelector("input[type=checkbox]");let s=!0;if(t.forEach((e=>{switch(e.name){case"phone":e.value<18&&(alert("Пожалуйста, введите номер телефона."),s=!1);break;case"name":""===e.value.trim()&&(alert("Пожалуйста, напишите ваше имя."),s=!1)}})),r.checked||(alert("Пожалуйста, дайте согласие на обработку персональных данных."),s=!1),s){const e=new FormData(this);let t={};e.forEach(((e,r)=>{t[r]=e})),(l=t,fetch("https://jsonplaceholder.typicode.com/comments/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then((e=>e.json())).catch((()=>console.error(new Error("Ошибка отправки данных из формы"))))).then((()=>{const e=document.querySelector(".popup-thank");o(e)})),this.reset()}var l;e.preventDefault()})))),function(e,t="+7 (___) ___-__-__"){const r=document.querySelectorAll(e);function o(e){const r=e.keyCode,o=t,s=o.replace(/\D/g,""),l=this.value.replace(/\D/g,"");let n=0,i=o.replace(/[_\d]/g,(function(e){return n<l.length?l.charAt(n++)||s.charAt(n):e}));n=i.indexOf("_"),-1!=n&&(i=i.slice(0,n));let a=o.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");a=new RegExp("^"+a+"$"),(!a.test(this.value)||this.value.length<5||r>47&&r<58)&&(this.value=i),"blur"==e.type&&this.value.length<5&&(this.value="")}for(const e of r)e.addEventListener("input",o),e.addEventListener("focus",o),e.addEventListener("blur",o)}('input[data-mask="phone"'),(()=>{const e=document.querySelectorAll(".mobile-hide .formula-item__icon"),t=document.querySelector(":root");e.forEach((e=>{e.addEventListener("mouseenter",(function(e){const r=e.target.closest(".formula-item"),o=r.querySelector(".formula-item-popup"),s=r.getBoundingClientRect().top,l=parseInt(getComputedStyle(o).height)+15;s<l?(t.style.setProperty("--number-degrees","180deg"),o.style.paddingTop="40px",o.style.bottom=-(l+15)+"px"):(t.style.setProperty("--number-degrees",0),o.style.paddingTop="20px",o.style.bottom="90px"),r.classList.add("active-item")})),e.addEventListener("mouseleave",(function(e){e.target.closest(".formula-item").classList.remove("active-item")}))}));const r=document.querySelectorAll(".desktop-hide .formula-item__icon");t.style.setProperty("--number-degrees","180deg"),r.forEach((e=>{e.addEventListener("click",(e=>{e.target.closest(".formula-item").classList.toggle("active-item")}))})),s({slidesClass:".formula-slider__slide",prevSelector:"#formula-arrow_left",nextSelector:"#formula-arrow_right",slidesWrapperClass:".formula-slider-wrap",slidesFieldClass:".formula-slider"})})(),(()=>{const e=document.querySelectorAll(".repair-types__tab-content");(({tabsContainerClass:e,tabClass:t,contentClass:r})=>{const o=document.querySelector(e),s=o.querySelectorAll(t),l=document.querySelectorAll(r),n=document.querySelector(".slider-counter-content__total"),i=document.querySelector(".slider-counter-content__current");o.addEventListener("click",(e=>{const r=e.target.closest(t);r&&s.forEach(((e,t)=>{r===e?(e.classList.add("active"),l[t].classList.remove("d-none"),(e=>{const t=l[e].querySelectorAll(".repair-types-slider__slide").length;n.textContent=t,i.textContent=1,l[e].style.transform="translateX(0)"})(t)):(e.classList.remove("active"),l[t].classList.add("d-none"))}))}))})({tabsContainerClass:".nav-list-repair",tabClass:".repair-types-nav__item",contentClass:".repair-types__tab-content"}),window.screen.width<1025&&s({slidesClass:".repair-types-nav__item",prevSelector:"#nav-arrow-repair-left_base",nextSelector:"#nav-arrow-repair-right_base",slidesWrapperClass:".repair-types-nav",slidesFieldClass:".nav-list-repair"}),e.forEach(((e,t)=>{s({slidesClass:`.types-repair${t+1} .repair-types-slider__slide`,prevSelector:"#repair-types-arrow_left",nextSelector:"#repair-types-arrow_right",slidesWrapperClass:".repair-types-slider",slidesFieldClass:`.types-repair${t+1}`,currentClass:".slider-counter-content__current",totalClass:".slider-counter-content__total"})}))})(),document.querySelector(".portfolio-slider-container").addEventListener("click",(e=>{if(e.target.classList.contains("portfolio-slider__slide-frame")){const t=document.querySelector(".popup-portfolio");(e=>{const t=+e.target.closest(".portfolio-slider__slide-frame").dataset.initialSlide,r=document.querySelector(".popup-portfolio-slider"),o=r.querySelector(".popup-portfolio-slider__slide"),s=parseFloat(o.style.width),l=document.querySelector("#popup-portfolio-counter .slider-counter-content__current");document.querySelectorAll(".popup-portfolio-text").forEach(((e,r)=>{e.style.display=r===t-1?"block":"none"})),r.style.transform=`translateX(-${s*(t-1)}px)`,l.textContent=t})(e),o(t)}})),s({slidesWrapperClass:".popup-portfolio-slider-wrap",slidesFieldClass:".popup-portfolio-slider",slidesClass:".popup-portfolio-slider__slide",prevSelector:"#popup_portfolio_left",nextSelector:"#popup_portfolio_right",currentClass:"#popup-portfolio-counter .slider-counter-content__current",totalClass:"#popup-portfolio-counter .slider-counter-content__total",changeDisplayClass:".popup-portfolio-text",initialSlide:!0}),window.screen.width>1025?s({slidesWrapperClass:".portfolio-slider-container",slidesFieldClass:".portfolio-slider.mobile-hide",slidesClass:".portfolio-slider__slide",prevSelector:"#portfolio-arrow_left",nextSelector:"#portfolio-arrow_right",slidesPerView:3,hideArrows:!0}):window.screen.width>=900?s({slidesWrapperClass:".portfolio-slider-container",slidesFieldClass:".portfolio-slider.mobile-hide",slidesClass:".portfolio-slider__slide",prevSelector:"#portfolio-arrow_left",nextSelector:"#portfolio-arrow_right",slidesPerView:2,totalClass:"#portfolio-counter .slider-counter-content__total",currentClass:"#portfolio-counter .slider-counter-content__current",hideArrows:!0}):window.screen.width>=576?s({slidesWrapperClass:".portfolio-slider-container",slidesFieldClass:".portfolio-slider.mobile-hide",slidesClass:".portfolio-slider__slide",prevSelector:"#portfolio-arrow_left",nextSelector:"#portfolio-arrow_right",totalClass:"#portfolio-counter .slider-counter-content__total",currentClass:"#portfolio-counter .slider-counter-content__current",hideArrows:!0}):s({slidesWrapperClass:".portfolio-slider-container",slidesFieldClass:".portfolio-slider-mobile",slidesClass:".portfolio-slider__slide-frame",prevSelector:"#portfolio-arrow-mobile_left",nextSelector:"#portfolio-arrow-mobile_right",totalClass:"#portfolio-counter .slider-counter-content__total",currentClass:"#portfolio-counter .slider-counter-content__current",hideArrows:!0}),document.querySelector(".transparency-slider").addEventListener("click",(e=>{const t=e.target;if(t.classList.contains("transparency-item__img")){const r=document.querySelector(".popup-transparency"),s=+t.closest(".transparency-item").dataset.initialSlide,l=document.querySelector(".popup-transparency-container"),n=l.querySelector(".popup-transparency-slider__slide"),i=parseFloat(n.style.width),a=document.querySelector("#transparency-popup-counter .slider-counter-content__current");l.style.transform=`translateX(-${i*(s-1)}px)`,a.textContent=s,o(r,e)}})),s({slidesWrapperClass:".popup-transparency-slider",slidesFieldClass:".popup-transparency-container",slidesClass:".popup-transparency-slider__slide",prevSelector:"#transparency_left",nextSelector:"#transparency_right",currentClass:"#transparency-popup-counter .slider-counter-content__current",totalClass:"#transparency-popup-counter .slider-counter-content__total",initialSlide:!0}),window.screen.width<1090&&s({slidesWrapperClass:".transparency-slider-wrap",slidesFieldClass:".transparency-slider",slidesClass:".transparency-item",prevSelector:"#transparency-arrow_left",nextSelector:"#transparency-arrow_right"}),s({slidesWrapperClass:".reviews-slider",slidesFieldClass:".reviews-slider__container",slidesClass:".reviews-slider__slide",prevSelector:"#reviews-arrow_left",nextSelector:"#reviews-arrow_right"}),(()=>{const e=document.querySelector("#faq-accordion");e.addEventListener("click",(t=>{const r=t.target;if(r.classList.contains("msg-active"))return void r.classList.remove("msg-active");const o=e.querySelector(".msg-active");o&&o.classList.remove("msg-active"),r.classList.contains("title_block")&&r.classList.add("msg-active")}))})(),(()=>{const e=document.querySelectorAll(".show-all-services"),t=document.querySelector(".popup-repair-types");e.forEach((e=>e.addEventListener("click",(e=>(async e=>{const r=document.querySelector(".nav-list-popup-repair"),l=document.getElementById("popup-repair-content"),n="popup-repair-types-nav__item--active",i=e=>{fetch(`http://localhost:3000/services?type=${e}`).then((e=>e.json())).then((e=>((e,t)=>{e.innerHTML="",t.forEach((t=>{const r=`<tr class="mobile-row">\n  <td class="repair-types-name">${t.name}</td>\n  <td class="mobile-col-title tablet-hide desktop-hide">Ед.измерения</td>\n  <td class="mobile-col-title tablet-hide desktop-hide">Цена за ед.</td>\n  <td class="repair-types-value">${"м2"===(o=t.units)?"м<sup>2</sup>":o}</td>\n  <td class="repair-types-value">${t.cost} руб.</td>\n</tr>`;var o;e.insertAdjacentHTML("beforeend",r)}))})(l,e)))};await(async e=>{const t=new Set,r=await(async()=>{const e=await fetch("http://localhost:3000/services/");return await e.json()})();let o=0;e.innerHTML="",r.forEach((e=>t.add(e.type))),t.forEach((t=>{const r=`<button\n    class="button_o popup-repair-types-nav__item ${0===o?"popup-repair-types-nav__item--active":""}"\n    data-repair-type="${s=t}">${s}</button>`;var s;e.insertAdjacentHTML("beforeend",r),o++}))})(r);const a=document.querySelector(`.${n}`).dataset.repairType;i(a),r.addEventListener("click",(e=>{const t=e.target.closest(".popup-repair-types-nav__item"),o=document.getElementById("switch-inner");if(t){const e=t.dataset.repairType;r.querySelector(`.${n}`).classList.remove(n),t.classList.add(n),o.textContent=e,i(e)}})),window.screen.width<1025&&s({slidesWrapperClass:".nav-popup-repair-types",slidesFieldClass:".nav-list-popup-repair",slidesClass:".popup-repair-types-nav__item",prevSelector:"#nav-arrow-popup-repair_left",nextSelector:"#nav-arrow-popup-repair_right"}),o(t,e)})(e)))))})(),window.addEventListener("resize",(()=>{}))})();